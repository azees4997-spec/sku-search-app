<!DOCTYPE html>
<html>
<head>
  <title>SKU Search</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <style>
    body { font-family: Arial; padding: 40px; }
    input { width: 400px; padding: 10px; }
    button { padding: 10px 20px; }
    table { margin-top: 20px; border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #ddd; padding: 8px; }
    th { background: #f2f2f2; }
  </style>
</head>
<body>

<h2>SKU Search</h2>

<input type="text" id="searchBox" placeholder="Paste SKU Name Here">
<button onclick="search()">Search</button>

<div id="results"></div>

<script>
  const supabaseUrl = "https://rhxrtsjocqizhxqhbzgu.supabase.co";
  const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJoeHJ0c2pvY3Fpemh4cWhiemd1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzEzMjY1MzQsImV4cCI6MjA4NjkwMjUzNH0.fa6pG3IxS05ngcpbrWCWPA5NAYF1YQ2kRn9WO__81qM";

  const { createClient } = supabase;
  const supabaseClient = createClient(supabaseUrl, supabaseKey);

  async function search() {
    const keyword = document.getElementById("searchBox").value;

    const { data, error } = await supabaseClient
      .from('drugs_data')   // <-- your table name
      .select('*')
      .ilike('sku_name', '%' + keyword + '%')
      .limit(20);

    if (error) {
      document.getElementById("results").innerHTML = error.message;
      return;
    }

    if (!data || data.length === 0) {
      document.getElementById("results").innerHTML = "No results found";
      return;
    }

    let html = "<table><tr><th>SKU ID</th><th>SKU Name</th><th>Pack Size</th><th>MRP</th></tr>";

    data.forEach(row => {
      html += "<tr>" +
        "<td>" + row.sku_id + "</td>" +
        "<td>" + row.sku_name + "</td>" +
        "<td>" + row.pack_size + "</td>" +
        "<td>" + row.mrp + "</td>" +
      "</tr>";
    });

    html += "</table>";

    document.getElementById("results").innerHTML = html;
  }
</script>

</body>
</html>
